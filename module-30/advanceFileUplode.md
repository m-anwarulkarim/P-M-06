‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶∏‡¶¨‡¶ï‡¶ø‡¶õ‡ßÅ **‡¶è‡¶ï‡¶¶‡¶Æ Í∑∏ÎåÄÎ°ú** (‡¶è‡¶ï‡¶á ‡¶≤‡ßá‡¶ñ‡¶æ/‡¶ï‡ßã‡¶°/‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶ü/‡¶≤‡¶æ‡¶á‡¶®) ‡¶∞‡ßá‡¶ñ‡ßá **‡¶∂‡ßÅ‡¶ß‡ßÅ senior-level clean structure** ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶∏‡¶æ‡¶ú‡¶ø‡ßü‡ßá ‡¶¶‡¶ø‡¶≤‡¶æ‡¶Æ ‚Äî ‡¶ï‡ßã‡¶®‡ßã ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü/‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°‡¶ø‡¶Ç/‡¶ï‡ßã‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡¶®‡¶ø‡•§

---

## 1. **‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶á‡¶®‡ßç‡¶∏‡¶ü‡¶≤ (Bun ‡¶¶‡¶ø‡ßü‡ßá):**

‡¶Ø‡ßá‡¶π‡ßá‡¶§‡ßÅ ‡¶Ü‡¶™‡¶®‡¶ø Bun ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡ßá‡¶®, ‡¶§‡¶æ‡¶á Bun-‡¶è‡¶∞ ‡¶®‡ßá‡¶ü‡¶ø‡¶≠ ‡¶™‡ßç‡¶Ø‡¶æ‡¶ï‡ßá‡¶ú ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶≠‡¶æ‡¶≤‡ßã:

```bash
bun add multer cloudinary multer-storage-cloudinary
bun add -d @types/multer
```

---

## 2. **‡¶è‡¶®‡¶≠‡¶æ‡¶Ø‡¶º‡¶∞‡¶®‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶≠‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤:**

‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã‡¶ú‡ßá‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶∞‡ßÅ‡¶ü‡ßá ‡¶è‡¶ï‡¶ü‡¶ø `.env` ‡¶´‡¶æ‡¶á‡¶≤ ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®:

```env
CLOUDINARY_NAME=your_name
CLOUDINARY_API_KEY=your_key
CLOUDINARY_API_SECRET=your_secret

```

---

## 3. **‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡¶æ‡¶ï‡¶ö‡¶æ‡¶∞ (Recommended)**

```
src/
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ cloudinary.ts        ‚Üê cloudinary config only
‚îÇ
‚îú‚îÄ‚îÄ middlewares/
‚îÇ   ‚îî‚îÄ‚îÄ upload/
‚îÇ       ‚îî‚îÄ‚îÄ multer.ts        ‚Üê multer + storage + fileFilter
‚îÇ
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îî‚îÄ‚îÄ file/
‚îÇ       ‚îú‚îÄ‚îÄ file.controller.ts
‚îÇ       ‚îî‚îÄ‚îÄ file.route.ts
‚îÇ
‚îî‚îÄ‚îÄ routes/
    ‚îî‚îÄ‚îÄ index.ts
```

---

## 4. **‡¶á‡¶®‡ßç‡¶∏‡¶ü‡¶≤ ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶° (‡¶™‡ßÅ‡¶®‡¶∞‡¶æ‡ßü)**

```bash
bun add multer cloudinary multer-storage-cloudinary
bun add -d @types/multer

```

---

# üß© 1Ô∏è‚É£ `src/config/cloudinary.ts`

```ts
import { v2 as cloudinary } from "cloudinary";
// ‡ßß. Cloudinary ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶®
// ‡¶è‡¶á ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡ßÅ‡¶ó‡ßÅ‡¶≤‡ßã ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á .env ‡¶´‡¶æ‡¶á‡¶≤ ‡¶•‡ßá‡¶ï‡ßá ‡¶Ü‡¶∏‡¶æ ‡¶â‡¶ö‡¶ø‡¶§
cloudinary.config({
  cloud_name: process.env.CLOUDINARY_NAME,
  api_key: process.env.CLOUDINARY_API_KEY,
  api_secret: process.env.CLOUDINARY_API_SECRET,
});

export default cloudinary;
```

---

# üß© 2Ô∏è‚É£ `src/middlewares/upload/multer.ts`

```ts
import path from "path";
import { Request } from "express";
import multer, { Options } from "multer";
import { CloudinaryStorage } from "multer-storage-cloudinary";

import cloudinary from "../../config/cloudinary";
/* =====================================================
   CLOUDINARY STORAGE SETUP
===================================================== */

// ‡ß®. ‡¶∏‡ßç‡¶ü‡ßã‡¶∞‡ßá‡¶ú ‡¶á‡¶û‡ßç‡¶ú‡¶ø‡¶® ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™
// ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶â‡¶° ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü ‡¶°‡¶ø‡¶´‡¶æ‡¶á‡¶® ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡¶ø
/**
 * Cloudinary Storage Setup
 * @purpose: ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶°‡¶ø‡¶®‡¶æ‡¶∞‡¶ø‡¶§‡ßá ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶π‡¶ú ‡¶ï‡¶∞‡¶æ‡•§
 */
const storage = new CloudinaryStorage({
  cloudinary: cloudinary,

  params: async (req: Request, file: Express.Multer.File) => {
    // ‡ßß. ‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶è‡¶ï‡ßç‡¶∏‡¶ü‡ßá‡¶®‡¶∂‡¶® ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶ï‡¶∞‡¶æ (‡¶Ø‡ßá‡¶Æ‡¶®: '.png')
    const fileExtension = path.extname(file.originalname);

    // ‡ß®. ‡¶è‡¶ï‡ßç‡¶∏‡¶ü‡ßá‡¶®‡¶∂‡¶® ‡¶¨‡¶æ‡¶¶‡ßá ‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶Æ‡ßÇ‡¶≤ ‡¶®‡¶æ‡¶Æ ‡¶¨‡ßá‡¶∞ ‡¶ï‡¶∞‡¶æ (‡¶Ø‡ßá‡¶Æ‡¶®: 'my-photo')
    // ‡¶Ü‡¶Æ‡¶∞‡¶æ .split('.') ‡¶è‡¶∞ ‡¶¨‡¶¶‡¶≤‡ßá path.basename ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶ø ‡¶ï‡¶æ‡¶∞‡¶£ ‡¶è‡¶ü‡¶ø ‡¶¨‡ßá‡¶∂‡¶ø ‡¶∞‡¶ø‡¶≤‡¶æ‡ßü‡ßá‡¶¨‡¶≤
    const fileNameWithoutExt = path.basename(file.originalname, fileExtension);

    // ‡ß©. ‡¶´‡¶æ‡¶á‡¶≤ ‡¶®‡ßá‡¶Æ ‡¶ï‡ßç‡¶≤‡¶ø‡¶®‡¶ø‡¶Ç (SEO ‡¶è‡¶¨‡¶Ç URL Friendly ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
    // ‡¶∏‡ßç‡¶™‡ßá‡¶∏ ‡¶∏‡¶∞‡¶ø‡ßü‡ßá '-' ‡¶¶‡ßá‡¶ì‡ßü‡¶æ ‡¶è‡¶¨‡¶Ç ‡¶∏‡¶¨ ‡¶õ‡ßã‡¶ü ‡¶π‡¶æ‡¶§‡ßá‡¶∞ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá ‡¶∞‡ßÇ‡¶™‡¶æ‡¶®‡ßç‡¶§‡¶∞ ‡¶ï‡¶∞‡¶æ
    const cleanFileName = fileNameWithoutExt
      .replace(/\s+/g, "-") // ‡¶∏‡¶¨ ‡¶∏‡ßç‡¶™‡ßá‡¶∏‡¶ï‡ßá ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶¶‡¶ø‡ßü‡ßá ‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡ßá‡¶∏
      .replace(/[^a-zA-Z0-9-]/g, "") // ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶≤‡ßá‡¶ü‡¶æ‡¶∞, ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶è‡¶¨‡¶Ç ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂ ‡¶∞‡¶æ‡¶ñ‡¶æ
      .toLowerCase();

    // ‡ß™. ‡¶°‡¶æ‡¶á‡¶®‡¶æ‡¶Æ‡¶ø‡¶ï ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶ø‡¶Ç (image/jpeg -> jpeg)
    // Cloudinary 'format' ‡¶´‡¶ø‡¶≤‡ßç‡¶° ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡ßç‡¶¨‡ßü‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡ßü‡¶≠‡¶æ‡¶¨‡ßá ‡¶è‡¶ï‡ßç‡¶∏‡¶ü‡ßá‡¶®‡¶∂‡¶® ‡¶¨‡¶∏‡¶ø‡ßü‡ßá ‡¶®‡ßá‡ßü
    const rawFormat = file.mimetype.split("/")[1];

    // ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ï‡ßç‡¶∑‡ßá‡¶§‡ßç‡¶∞‡ßá mimetype 'svg+xml' ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá, ‡¶∏‡ßá‡¶ü‡¶æ‡¶ï‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶® ‡¶ï‡¶∞‡¶æ
    const finalFormat = rawFormat === "svg+xml" ? "svg" : rawFormat;

    return {
      folder: "my_app_uploads", // ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶°‡¶ø‡¶®‡¶æ‡¶∞‡¶ø ‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ

      format: finalFormat, // ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü ‡¶¨‡¶≤‡ßá ‡¶¶‡¶ø‡¶≤‡ßá public_id ‡¶§‡ßá ‡¶è‡¶ï‡ßç‡¶∏‡¶ü‡ßá‡¶®‡¶∂‡¶® ‡¶≤‡¶æ‡¶ó‡ßá ‡¶®‡¶æ

      // ‡¶á‡¶â‡¶®‡¶ø‡¶ï ‡¶™‡¶æ‡¶¨‡¶≤‡¶ø‡¶ï ‡¶Ü‡¶á‡¶°‡¶ø ‡¶§‡ßà‡¶∞‡¶ø (‡¶ü‡¶æ‡¶á‡¶Æ‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™ + ‡¶ï‡ßç‡¶≤‡¶ø‡¶® ‡¶®‡ßá‡¶Æ)
      // ‡¶è‡¶§‡ßá ‡¶è‡¶ï‡¶á ‡¶®‡¶æ‡¶Æ‡ßá‡¶∞ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá‡¶ì ‡¶è‡¶ï‡ßá‡¶ï‡¶ü‡¶æ‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø ‡¶Ü‡¶≤‡¶æ‡¶¶‡¶æ ‡¶π‡¶¨‡ßá
      public_id: `${Date.now()}-${cleanFileName}`,

      // ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶°‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶´‡¶∞‡¶Æ‡ßá‡¶∂‡¶® (‡¶Ö‡¶™‡¶∂‡¶®‡¶æ‡¶≤ ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶∞‡¶ø‡¶ï‡¶Æ‡ßá‡¶®‡ßç‡¶°‡ßá‡¶°)
      transformation: [
        { quality: "auto", fetch_format: "auto" }, // ‡¶Ö‡¶ü‡ßã‡¶Æ‡ßá‡¶ü‡¶ø‡¶ï ‡¶á‡¶Æ‡ßá‡¶ú ‡¶Ö‡¶™‡¶ü‡¶ø‡¶Æ‡¶æ‡¶á‡¶ú‡ßá‡¶∂‡¶®
      ],
    };
  },
});

/* =====================================================
   FILE FILTER
===================================================== */

// file filter
// // ‡ß©. ‡¶´‡¶æ‡¶á‡¶≤ ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ (‡¶∏‡¶ø‡¶ï‡¶ø‡¶â‡¶∞‡¶ø‡¶ü‡¶ø‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶á‡¶Æ‡ßá‡¶ú ‡¶è‡¶≤‡¶æ‡¶ì ‡¶ï‡¶∞‡¶æ)
/**
 * fileFilter - ‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶ß‡¶∞‡¶® ‡¶Ø‡¶æ‡¶ö‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡ßÉ‡¶§ ‡¶π‡ßü‡•§
 * @param req - Express Request object
 * @param file - Multer file object (‡¶Ø‡ßá‡¶ñ‡¶æ‡¶®‡ßá mimetype, originalname ‡¶•‡¶æ‡¶ï‡ßá)
 * @param cb - Multer Callback (‡¶è‡¶ü‡¶ø‡¶á ‡¶®‡¶ø‡¶∞‡ßç‡¶ß‡¶æ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßá ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶ó‡ßç‡¶∞‡¶π‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá ‡¶ï‡¶ø ‡¶®‡¶æ)
 */
export const fileFilter = (
  req: Request,
  file: Express.Multer.File,
  cb: multer.FileFilterCallback,
) => {
  // ‡ßß. ‡¶∏‡¶æ‡¶™‡ßã‡¶∞‡ßç‡¶ü‡ßá‡¶° ‡¶´‡¶æ‡¶á‡¶≤ ‡¶ü‡¶æ‡¶á‡¶™‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø ‡¶π‡ßã‡ßü‡¶æ‡¶á‡¶ü‡¶≤‡¶ø‡¶∏‡ßç‡¶ü (Whitelist) ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ
  // ‡¶∂‡ßÅ‡¶ß‡ßÅ mimetype.startsWith("image/") ‡¶ï‡¶∞‡¶æ ‡¶∞‡¶ø‡¶∏‡ßç‡¶ï‡¶ø ‡¶π‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá, ‡¶§‡¶æ‡¶á ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶¨‡ßá‡¶∏‡ßç‡¶ü
  const allowedMimeTypes = [
    "image/jpeg", // .jpg ‡¶è‡¶¨‡¶Ç .jpeg ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
    "image/png", // .png ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
    "image/webp", // .webp ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø (‡¶Æ‡¶°‡¶æ‡¶∞‡ßç‡¶® ‡¶ì‡ßü‡ßá‡¶¨‡¶∏‡¶æ‡¶á‡¶ü‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¨‡ßá‡¶∏‡ßç‡¶ü)
    "image/gif", // ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶™‡¶®‡¶ø GIF ‡¶è‡¶≤‡¶æ‡¶â ‡¶ï‡¶∞‡¶§‡ßá ‡¶ö‡¶æ‡¶®
  ];

  // ‡ß®. ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ mimetype ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü‡ßá ‡¶Ü‡¶õ‡ßá ‡¶ï‡¶ø ‡¶®‡¶æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ
  if (allowedMimeTypes.includes(file.mimetype)) {
    /**
     * cb(null, true) ‡¶Æ‡¶æ‡¶®‡ßá ‡¶π‡¶≤‡ßã:
     * - ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ (null): ‡¶ï‡ßã‡¶®‡ßã ‡¶è‡¶∞‡¶∞ ‡¶®‡ßá‡¶á‡•§
     * - ‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡ßü ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ (true): ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°, ‡¶è‡¶ñ‡¶® ‡¶è‡¶ü‡¶ø storage-‡¶è ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶Ø‡¶æ‡¶¨‡ßá‡•§
     */
    cb(null, true);
  } else {
    /**
     * cb(error, false) ‡¶Æ‡¶æ‡¶®‡ßá ‡¶π‡¶≤‡ßã:
     * - ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞: ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶§‡ßÅ‡¶® Error ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü (‡¶è‡¶ü‡¶ø Express ‡¶è‡¶∞ ‡¶è‡¶∞‡¶∞ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá)‡•§
     * - ‡¶¶‡ßç‡¶¨‡¶ø‡¶§‡ßÄ‡ßü ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ (false): ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶á‡¶®‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°, ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá ‡¶®‡¶æ‡•§
     */
    const error = new Error(
      "‡¶≠‡ßÅ‡¶≤ ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü! ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ .jpg, .jpeg, .png, ‡¶è‡¶¨‡¶Ç .webp ‡¶á‡¶Æ‡ßá‡¶ú ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá‡•§",
    );

    // ‡¶ü‡¶æ‡¶á‡¶™‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶è‡¶∞‡¶∞ ‡¶è‡ßú‡¶æ‡¶§‡ßá 'as any' ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü (Multer-‡¶è‡¶∞ ‡¶ü‡¶æ‡¶á‡¶™ ‡¶°‡ßá‡¶´‡¶ø‡¶®‡¶ø‡¶∂‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ)
    cb(error as any, false);
  }
};

/* =====================================================
   MULTER CONFIGURATION
===================================================== */

/**
 * Multer ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶® ‡¶Ö‡¶™‡¶∂‡¶®
 * ‡¶Ü‡¶Æ‡¶∞‡¶æ 'Options' ‡¶ü‡¶æ‡¶á‡¶™ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡¶ø ‡¶Ø‡¶æ‡¶§‡ßá ‡¶ü‡¶æ‡¶á‡¶™ ‡¶∏‡ßá‡¶´‡¶ü‡¶ø ‡¶¨‡¶ú‡¶æ‡ßü ‡¶•‡¶æ‡¶ï‡ßá
 */
const multerOptions: Options = {
  storage: storage,
  fileFilter: fileFilter,

  limits: {
    fileSize: 5 * 1024 * 1024, // ‡ß´ ‡¶Æ‡ßá‡¶ó‡¶æ‡¶¨‡¶æ‡¶á‡¶ü (Bytes ‡¶è ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü)
    files: 1, // ‡¶è‡¶ï‡¶¨‡¶æ‡¶∞‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö ‡¶ï‡ßü‡¶ü‡¶ø ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá (‡¶ê‡¶ö‡ßç‡¶õ‡¶ø‡¶ï ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶≠‡¶æ‡¶≤‡ßã)
  },
};

/* =====================================================
   EXPORT UPLOAD INSTANCE
===================================================== */

export const upload = multer(multerOptions);
```

---

# üß© 3Ô∏è‚É£ `src/modules/file/file.controller.ts`

```ts
import { Request, Response } from "express";

/* =====================================================
   CONTROLLER: IMAGE UPLOAD (CLOUDINARY)
===================================================== */

/**
 * Controller: Cloudinary-‡¶§‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ ‡¶á‡¶Æ‡ßá‡¶ú‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶ï‡¶∞‡¶æ‡•§
 * ‡¶è‡¶á ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤‡¶æ‡¶∞‡¶ü‡¶ø ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶§‡¶ñ‡¶®‡¶á ‡¶ï‡¶≤ ‡¶π‡¶¨‡ßá ‡¶Ø‡¶ñ‡¶® Multer ‡¶è‡¶¨‡¶Ç Cloudinary ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶¨‡ßá‡•§
 */
export const uploadImageController = (req: Request, res: Response) => {
  try {
    /* -----------------------------------------------
       1) Validate Request File
    ----------------------------------------------- */

    // ‡ßß. ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá Multer ‡¶Æ‡¶ø‡¶°‡¶≤‡¶ì‡ßü‡ßç‡¶Ø‡¶æ‡¶∞‡¶ü‡¶ø ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶∞‡¶ø‡¶∏‡¶ø‡¶≠ ‡¶ï‡¶∞‡ßá‡¶õ‡ßá ‡¶ï‡¶ø ‡¶®‡¶æ‡•§
    // ‡¶Ø‡¶¶‡¶ø fileFilter ‡¶¨‡¶æ ‡¶∏‡¶æ‡¶á‡¶ú ‡¶≤‡¶ø‡¶Æ‡¶ø‡¶ü ‡¶´‡ßá‡¶≤ ‡¶ï‡¶∞‡ßá, ‡¶§‡¶¨‡ßá req.file ‡¶•‡¶æ‡¶ï‡¶¨‡ßá ‡¶®‡¶æ‡•§
    if (!req.file) {
      return res.status(400).json({
        success: false,
        message: "‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶¨‡ßà‡¶ß ‡¶á‡¶Æ‡ßá‡¶ú ‡¶´‡¶æ‡¶á‡¶≤ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",
      });
    }

    /* -----------------------------------------------
       2) Extract Cloudinary Response Data
    ----------------------------------------------- */

    /**
     * ‡ß®. ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶°‡¶ø‡¶®‡¶æ‡¶∞‡¶ø ‡¶•‡ßá‡¶ï‡ßá ‡¶Ü‡¶∏‡¶æ ‡¶°‡ßá‡¶ü‡¶æ ‡¶è‡¶ï‡ßç‡¶∏‡¶ü‡ßç‡¶∞‡¶æ‡¶ï‡¶∂‡¶®:
     * multer-storage-cloudinary ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡ßá‡¶∞ ‡¶´‡¶≤‡ßá req.file ‡¶è‡¶∞ ‡¶≠‡ßá‡¶§‡¶∞ ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶¨‡¶ø‡¶∂‡ßá‡¶∑ ‡¶™‡ßç‡¶∞‡¶™‡¶æ‡¶∞‡ßç‡¶ü‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶π‡ßü‡•§
     * * - path: ‡¶è‡¶ü‡¶ø ‡¶π‡¶≤‡ßã ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶°‡¶ø‡¶®‡¶æ‡¶∞‡¶ø‡¶§‡ßá ‡¶π‡ßã‡¶∏‡ßç‡¶ü‡ßá‡¶° ‡¶á‡¶Æ‡ßá‡¶ú‡ßá‡¶∞ ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï (HTTPS URL)‡•§
     * - filename: ‡¶è‡¶ü‡¶ø ‡¶π‡¶≤‡ßã ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶°‡¶ø‡¶®‡¶æ‡¶∞‡¶ø‡¶§‡ßá ‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ 'public_id' (‡¶´‡ßã‡¶≤‡ßç‡¶°‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ‡¶∏‡¶π)‡•§ ‡¶è‡¶ü‡¶ø ‡¶á‡¶Æ‡ßá‡¶ú ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶¨‡¶æ ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶≤‡¶æ‡¶ó‡ßá‡•§
     */
    const imageUrl = (req.file as any).path;
    const publicId = (req.file as any).filename;

    /* -----------------------------------------------
       3) Send Success Response
    ----------------------------------------------- */

    // ‡ß©. ‡¶∏‡¶æ‡¶ï‡¶∏‡ßá‡¶∏ ‡¶∞‡ßá‡¶∏‡¶™‡¶®‡ßç‡¶∏ ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
    // ‡¶è‡¶á ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡ßü‡ßá ‡¶Ü‡¶™‡¶®‡¶ø ‡¶ö‡¶æ‡¶á‡¶≤‡ßá imageUrl ‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡ßá‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá (MongoDB/SQL) ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡•§
    return res.status(200).json({
      success: true,
      message: "‡¶á‡¶Æ‡ßá‡¶ú‡¶ü‡¶ø ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶°‡¶ø‡¶®‡¶æ‡¶∞‡¶ø‡¶§‡ßá ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶π‡ßü‡ßá‡¶õ‡ßá!",
      data: {
        url: imageUrl, // ‡¶´‡ßç‡¶∞‡¶®‡ßç‡¶ü‡¶è‡¶®‡ßç‡¶°‡ßá ‡¶á‡¶Æ‡ßá‡¶ú ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
        public_id: publicId, // ‡¶´‡¶ø‡¶â‡¶ö‡¶æ‡¶∞ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ (‡¶Ø‡ßá‡¶Æ‡¶® ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü) ‡¶ú‡¶®‡ßç‡¶Ø
      },
    });
  } catch (error: any) {
    /* -----------------------------------------------
       4) Error Handling
    ----------------------------------------------- */

    /**
     * ‡ß™. ‡¶è‡¶∞‡¶∞ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶ø‡¶Ç:
     * ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶ü‡ßá‡¶ï‡¶®‡¶ø‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶°‡¶ø‡¶®‡¶æ‡¶∞‡¶ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶°‡¶æ‡¶â‡¶®)‡•§
     */
    console.error("Upload Controller Error:", error);

    return res.status(500).json({
      success: false,
      message: error.message || "‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡¶æ‡¶≤ ‡¶è‡¶∞‡¶∞! ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§",
    });
  }
};
```

---

### ‡¶ï‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶∞‡¶æ‡¶® ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?

‡ßß. **‡¶∞‡¶æ‡¶â‡¶ü ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™:**

```typescript
import express from "express";
import { upload } from "./multer";
import { uploadImageController } from "./file.controller";

const router = express.Router();

// 'image' ‡¶π‡¶≤‡ßã ‡¶∏‡ßá‡¶á ‡¶ï‡¶ø (key) ‡¶Ø‡¶æ ‡¶Ü‡¶™‡¶®‡¶ø Postman ‡¶¨‡¶æ Frontend ‡¶•‡ßá‡¶ï‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶¨‡ßá‡¶®
// ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶è‡¶®‡ßç‡¶°‡ßá ‡¶Ø‡¶¶‡¶ø ‡¶è‡¶ü‡¶ø ‡¶•‡¶æ‡¶ï‡ßá:
router.post("/upload", upload.single("image"), uploadImageController);
// ‡¶§‡¶¨‡ßá ‡¶´‡ßç‡¶∞‡¶®‡ßç‡¶ü‡¶è‡¶®‡ßç‡¶°‡ßá ‡¶¨‡¶æ ‡¶™‡ßã‡¶∏‡ßç‡¶ü‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá Key ‡¶è‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á "image" ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá‡•§

export default uploadRoutes = router;
```

```ts
import express, { Application, Request, Response, NextFunction } from "express";
import cors from "cors";
import uploadRoutes from "./routes/upload.route"; // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡¶æ‡¶â‡¶ü ‡¶´‡¶æ‡¶á‡¶≤‡¶ü‡¶ø ‡¶á‡¶Æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®

const app: Application = express();

// --- ‡¶Æ‡¶ø‡¶°‡¶≤‡¶ì‡ßü‡ßç‡¶Ø‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ---

// ‡ßß. CORS (Cross-Origin Resource Sharing): ‡¶´‡ßç‡¶∞‡¶®‡ßç‡¶ü‡¶è‡¶®‡ßç‡¶° ‡¶•‡ßá‡¶ï‡ßá ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶è‡¶≤‡¶æ‡¶â ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
app.use(cors());

// ‡ß®. ‡¶¨‡¶°‡¶ø ‡¶™‡¶æ‡¶∞‡ßç‡¶∏‡¶æ‡¶∞: ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£ JSON ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßú‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
// ‡¶Æ‡¶®‡ßá ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá‡¶®: ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶°‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø express.json() ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡ßá ‡¶®‡¶æ, ‡¶∏‡ßá‡¶ü‡¶ø Multer ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡ßá‡¶≤ ‡¶ï‡¶∞‡ßá‡•§
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// --- ‡¶∞‡¶æ‡¶â‡¶ü ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™ ---

// ‡ß©. ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶∞‡¶æ‡¶â‡¶ü ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
app.use("/api/v1", uploadRoutes);

// ‡ß™. ‡¶¨‡ßá‡¶∏‡¶ø‡¶ï ‡¶π‡ßá‡¶≤‡¶• ‡¶ö‡ßá‡¶ï ‡¶∞‡¶æ‡¶â‡¶ü
app.get("/", (req: Request, res: Response) => {
  res.send("Server is running smoothly! üöÄ");
});

// --- ‡¶ï‡ßç‡¶≤‡¶æ‡¶â‡¶°‡¶ø‡¶®‡¶æ‡¶∞‡¶ø ‡¶ì ‡¶Æ‡¶æ‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶è‡¶∞‡¶∞ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶ø‡¶Ç ---

/**
 * ‡ß´. ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶è‡¶∞‡¶∞ ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞:
 * ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶°‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü ‡¶ï‡ßã‡¶®‡ßã ‡¶≠‡ßÅ‡¶≤ ‡¶π‡¶≤‡ßá (‡¶Ø‡ßá‡¶Æ‡¶® ‡¶∏‡¶æ‡¶á‡¶ú ‡¶¨‡ßá‡¶∂‡¶ø ‡¶π‡¶ì‡ßü‡¶æ ‡¶¨‡¶æ ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶è‡¶∞‡¶∞)
 * ‡¶è‡¶á ‡¶Æ‡¶ø‡¶°‡¶≤‡¶ì‡ßü‡ßç‡¶Ø‡¶æ‡¶∞‡¶ü‡¶ø ‡¶∏‡ßá‡¶ü‡¶ø ‡¶ß‡¶∞‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞‡¶≠‡¶æ‡¶¨‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶ú‡¶æ‡¶®‡¶æ‡¶¨‡ßá‡•§
 */
app.use((err: any, req: Request, res: Response, next: NextFunction) => {
  if (err instanceof Error) {
    return res.status(400).json({
      success: false,
      message: err.message || "‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶è‡¶ï‡¶ü‡¶æ ‡¶≠‡ßÅ‡¶≤ ‡¶π‡ßü‡ßá‡¶õ‡ßá!",
    });
  }

  // ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶è‡¶∞‡¶∞
  res.status(500).json({
    success: false,
    message: "‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶è‡¶∞‡¶∞!",
  });
});

export default app;
```
